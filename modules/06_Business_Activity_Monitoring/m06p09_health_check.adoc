:noaudio:

[#healthcheck]
== Health Check

* Goal : Control/check if endpoints (producer/consumer) are still healthy
* Require camel-metrics component and/or at least Dropwizard Metrics api
* Allow to register some beans controlling the status of the endpoints, route or context
+
.Camel Context Health Example
[source]
----
public class CamelHealthCheck extends HealthCheck {

    @Override
    protected Result check() throws Exception {
        Result result = checkCamelContext();
        if (!result.isHealthy()) {
            return result;
        }

    private Result checkCamelContext() {
        LOGGER.debug("Checking context [{}] of type [{}]", camelContext.getName(), camelContext.getClass());
        ServiceStatus status = camelContext.getStatus();
        if (!status.isStarted()) {
            return Result.unhealthy(String.format("CamelContext [%s] is not running", camelContext.getName()));
        }
        return Result.healthy();
    }
----

ifdef::showscript[]
[.notes]
****

== Health Check


****
endif::showscript[]